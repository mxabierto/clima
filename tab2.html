<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Cambio Climatico</title>

	<!-- Bootstrap core CSS -->
	<link href="css/bootstrap.css" rel="stylesheet">

	<!-- Font Awesome -->
	<link href="css/font-awesome.min.css" rel="stylesheet">

	<!--Tabs Style -->
	<link type="text/css" rel="stylesheet" href="css/tabs_style.css" />

	<link href="css/c3.css" rel="stylesheet" type="text/css">    
	<link href="css/opiscatter.css" rel="stylesheet" type="text/css">

	<!-- Custom styles for this template -->
	<link href="css/main_style.css" rel="stylesheet">

	<!-- Leaflet -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

</head>

<body>	
	<div class="container-clima">
		<div class="row">
			<div class="principal-navbar">
				<div class="climatic-title">
					<a href="index.html" class="climatic-changetext" style="color:white;">Cambio Climático</a>
				</div>
				<div class="tab1-nav pull-right" style="padding-right: 30px">
					<div class="top-tabs">
						<a href="tab1.html">Cambio Climático</a>
					</div>	
					<div class="top-tabs">
						<a href="tab2.html"><p class="nav-tab-active">¿Por qué pasa?</p></a>
					</div>
					<div class="top-tabs">
						<a href="tab3.html">¿Cómo me afecta?</a>
					</div>			
					<div class="top-tabs">
						<a href="tab4.html">Acciones</a>
					</div>															
				</div>			
			</div>	
			<div id="responsiveTabsContainer">
				
				<div id="tab-3"> 
					<p class="huge-title">¿Por qué pasa?</p>
					<p class="black-text">
						El cambio climático que hoy enfrentamos está vinculado a la quema de combustibles fósiles, especialmente carbón, gas y petróleo, y a la deforestación, es decir, a la pérdida de superficie forestal. Ambos fenómenos tienen como consecuencia una disminución en la capacidad de absorción y un aumento excesivo en la emisión de gases de efecto invernadero (GEI) hacia la atmósfera, mismos que incrementan la temperatura del planeta

					</p>
					<p class="subtitle" style="padding-top: 20px;">
						Emisiones de carbono (Co<sub>2</sub>) por sector de la economía
					</p>    
					<div class="row">
						<div class="col-xs-12">
							<div id="chart"></div>
						</div>	
					</div>	
					
					<p class="subtitle" style="padding-bottom: 20px;">Gases efecto invernadero</p>
					<div class="select-container">
						<p class="text-center select-text">
							Selecciona un indicador 
						</p>		
						<select id="opciones" class="indicator_select">
						</select>
					</div>	
					<br>
					<div class="row">
						<div class="col-xs-12">
							<div id="map"></div>
						</div>
					</div>		

					<div class="row" style="display: flex;" id="anios-container">
						<div class="aqua-text" style="width: 100%;" id="anio2014">
							<p class="text-center map-year"><strong>2014</strong></p>
						</div>																								
					</div>
					<br>
					<!-- Data table-->
					<div class="">
						<h4 class="subtitle"><strong>Datos</strong></h4>	
						<div class="data-table-container center-block">
							<br>
							<div class="titles-databar">
								<div class="name-databar">
									<img class="triangle-image" src="img/triangle.svg">
									<p>Nombre</p>
								</div>						
								<div class="dependence-databar">
									<img class="triangle-image" src="img/triangle.svg">
									<p>Dependencia</p>
								</div>
								<div class="date-databar">
									<img class="triangle-image" src="img/triangle.svg">
									<p>Fecha</p>
								</div>
								<div class="format-databar">
									<img class="triangle-image" src="img/triangle.svg">
									<p>Formato</p>
								</div>
							</div>		
							<div class="data-bar">
								<div class="description-databar">
									<p>EMPRESAS PRODUCTORAS DE MINERALES METÁLICOS Y NO METÁLICOS, EMBAJADAS, INSTIT...POPULAR</p> 
								</div>	
								<div class="secretary-databar">
									<p>Secretaría de Salud</p>
								</div>
								<div class="datetext-databar">
									<p>25/Nov/2015</p>
								</div>
								<div class="formatcontainer-databar">
									<div class="csv-format">
										<p class="format-texts">CSV</p>
									</div>
									<div class="klm-format">
										<p class="format-texts">KLM</p>
									</div>		
								</div>
								<div class="greyblock-databar pull-right">
									<img class="green-bars" src="img/green_bars.svg">
								</div>		
							</div>
							<br>
							<div class="data-bar">
								<div class="description-databar">
									<p>EMPRESAS PRODUCTORAS DE MINERALES METÁLICOS Y NO METÁLICOS, EMBAJADAS, INSTIT...POPULAR</p> 
								</div>	
								<div class="secretary-databar">
									<p>Secretaría de Salud</p>
								</div>
								<div class="datetext-databar">
									<p>25/Nov/2015</p>
								</div>
								<div class="formatcontainer-databar">
									<div class="csv-format">
										<p class="format-texts">CSV</p>
									</div>
									<div class="klm-format">
										<p class="format-texts">KLM</p>
									</div>		
								</div>
								<div class="greyblock-databar pull-right">
									<img class="green-bars" src="img/green_bars.svg">
								</div>		
							</div>
							<br>
							<div class="data-bar">
								<div class="description-databar">
									<p>EMPRESAS PRODUCTORAS DE MINERALES METÁLICOS Y NO METÁLICOS, EMBAJADAS, INSTIT...POPULAR</p> 
								</div>	
								<div class="secretary-databar">
									<p>Secretaría de Salud</p>
								</div>
								<div class="datetext-databar">
									<p>25/Nov/2015</p>
								</div>
								<div class="formatcontainer-databar">
									<div class="csv-format">
										<p class="format-texts">CSV</p>
									</div>
									<div class="klm-format">
										<p class="format-texts">KLM</p>
									</div>		
								</div>
								<div class="greyblock-databar pull-right">
									<img class="green-bars" src="img/green_bars.svg">
								</div>		
							</div>
							<br>
							<div class="data-bar">
								<div class="description-databar">
									<p>EMPRESAS PRODUCTORAS DE MINERALES METÁLICOS Y NO METÁLICOS, EMBAJADAS, INSTIT...POPULAR</p> 
								</div>	
								<div class="secretary-databar">
									<p>Secretaría de Salud</p>
								</div>
								<div class="datetext-databar">
									<p>25/Nov/2015</p>
								</div>
								<div class="formatcontainer-databar">
									<div class="csv-format">
										<p class="format-texts">CSV</p>
									</div>
									<div class="klm-format">
										<p class="format-texts">KLM</p>
									</div>		
								</div>
								<div class="greyblock-databar pull-right">
									<img class="green-bars" src="img/green_bars.svg">
								</div>		
							</div>
							<br>
							<br>
								
						</div>

					</div>

				</div>
			</div>	
		</div>
	</div>	
	<!-- /.container -->
	<div class="black-footer">
		<div class="lists-container center-block">
			<div class="footer-lists">
				<ul style="list-style-type: none; padding-left: 40px;">
					<li class="lists-titles">Datos</li>
					<li>Cultura</li>
					<li>Salud</li>
					<li>Geografía</li>
					<li>Seguridad</li>
					<li>Medio Ambiente</li>
					<li>Educación</li>
					<li>Economía</li>
					<li>Turismo</li>
				</ul>
			</div>
			<div class="footer-lists">
				<ul style="list-style-type: none; padding-left: 30px;">
					<li class="lists-titles">Herramientas</li>
					<li>Apps Web</li>
					<li>Apps Móviles</li>
					<li>Interactivas</li>
				</ul>
			</div>
			<div class="footer-lists">
				<ul style="list-style-type: none; padding-left: 30px;">
					<li class="lists-titles">Impacto</li>
					<li>Casos de uso</li>
					<li>Noticias</li>
				</ul>
			</div>
			<div class="footer-lists">
				<ul style="list-style-type: none; padding-left: 30px;">
					<li class="lists-titles">Guía</li>
					<li>Pasos y recursos</li>
					<li>Tablero de avances</li>
				</ul>
			</div>
			<div class="footer-diflist">
				<ul style="list-style-type: none; padding-left: 30px;">
					<li class="lists-titles">Retos</li>
					<li class="lists-titles">Consejo Consultivo</li>
					<li class="lists-titles">Red México Abierto</li>
					<li class="lists-titles">Adela</li>
				</ul>
			</div>		
			<div class="footer-lists">
			<ul style="list-style-type: none; padding-left: 30px;">
				<li class="lists-titles">Acerca</li>
				<br>
				<li class="lists-titles">Ayuda</li>
				<li>Preguntas Frecuentes</li>
				<li>Foro</li>
			</ul>
			</div>
		</div>			
	</div>	

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="js/jquery-1.11.0.min.js"></script>    
    <script src="js/bootstrap.js"></script>

    <!-- D3/C3 -->	
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>    
    <script src="js/c3.js"></script>
    <script type="text/javascript" src="js/scatter002.js"></script>

    <!-- Leaflet -->
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

    <script type="text/javascript">


    	/*$('#responsiveTabsContainer').responsiveTabs({
    		active: 2
    	});*/

    	var main_url= "http://trebolbit.mx/cambio_climatico/"

    	$('#tab1').click(function(){
    		window.location.href=main_url;
    	});
    	$('#tab2').click(function(){
    		window.location.href=main_url+"tab2.html";
    	});
    	$('#tab3').click(function(){
    		window.location.href=main_url+"tab3.html";
    	});
    	$('#tab4').click(function(){
    		window.location.href=main_url+"tab4.html";
    	});		

    	var estados;
    	var anio = 2014;
    	var op = 1;
    	var topEs;
    	var filas = "";
    	var ind; 


    	$('#opciones').change(function() {

    		if($(this).val() == 1) {
    			crearAnios1();
    			anio = 2014;

    			$('#anio2014').addClass("aqua-text");

    			crearFilasIndicador1();
    			pintarMapa();
    		} else if($(this).val() == 2) {
    			crearAnios2();
    			anio = 2014;

    			$('#anio2014').addClass("aqua-text");

    			crearFilasIndicador2();
    			pintarMapa2();
    		} else if($(this).val() == 3) {
    			crearAnios3();
    			anio = 2015;

    			$('#anio2015').addClass("aqua-text");

    			crearFilasIndicador3();
    			pintarMapa3();
    		} else if($(this).val() == 4) {
    			crearAnios4();
				anio = 2012;

				$('#anio2012').addClass("aqua-text");
    			crearFilasIndicador4();
    			pintarMapa4();
    		} else if($(this).val() == 5) {
    			crearAnios5();
				anio = 2012;

				$('#anio2012').addClass("aqua-text");
    			
    			crearFilasIndicador5();
    			pintarMapa5();
    		} else if($(this).val() == 6) {
    			crearAnios6();
				anio = 2012;

				$('#anio2012').addClass("aqua-text");
    			
    			crearFilasIndicador6();
    			pintarMapa6();
    		} else if($(this).val() == 7) {
    			crearAnios7();
				anio = 2012;

				$('#anio2012').addClass("aqua-text");
    			crearFilasIndicador7();
    			pintarMapa7();
    		} else if($(this).val() == 8) {
    			crearAnios8();
				anio = 2011;

				$('#anio2011').addClass("aqua-text");
    			crearFilasIndicador8();
    			pintarMapa8();
    		} else if($(this).val() == 9) {
    			crearAnios9();
				anio = 2015;

				$('#anio2015').addClass("aqua-text");
    			crearFilasIndicador9();
    			pintarMapa9();
    		}

    	});

$("#anios-container").on("click", "div", function() {
	// console.log($(this).text());
	if($(this).text() == 2010) {
		anio = 2010;

    		$(this).addClass("aqua-text");
    		$('#anio2011').removeClass("aqua-text");
    		$('#anio2012').removeClass("aqua-text");
    		$('#anio2013').removeClass("aqua-text");
    		$('#anio2014').removeClass("aqua-text");
    		$('#anio2015').removeClass("aqua-text");


			if($('#opciones').val() == 3) {
				crearFilasIndicador3();
				pintarMapa3();
			} else 
			if($('#opciones').val() == 4) {
				crearFilasIndicador4();
				pintarMapa4();
			} else 
			if($('#opciones').val() == 5) {
				crearFilasIndicador5();
				pintarMapa5();
			} else 
			if($('#opciones').val() == 6) {
				crearFilasIndicador6();
				pintarMapa6();
			} else 
			if($('#opciones').val() == 7) {
				crearFilasIndicador7();
				pintarMapa7();
			}
	} else if($(this).text() == 2011) {
		anio = 2011;

    		$('#anio2010').removeClass("aqua-text");
    		$(this).addClass("aqua-text");
    		$('#anio2012').removeClass("aqua-text");
    		$('#anio2013').removeClass("aqua-text");
    		$('#anio2014').removeClass("aqua-text");
    		$('#anio2015').removeClass("aqua-text");

			if($('#opciones').val() == 3) {
				crearFilasIndicador3();
				pintarMapa3();
			} else 
			if($('#opciones').val() == 4) {
				crearFilasIndicador4();
				pintarMapa4();
			} else 
			if($('#opciones').val() == 5) {
				crearFilasIndicador5();
				pintarMapa5();
			} else 
			if($('#opciones').val() == 6) {
				crearFilasIndicador6();
				pintarMapa6();
			} else 
			if($('#opciones').val() == 7) {
				crearFilasIndicador7();
				pintarMapa7();
			}
	} else if($(this).text() == 2012) {
		anio = 2012;

    		$('#anio2010').removeClass("aqua-text");
    		$('#anio2011').removeClass("aqua-text");
    		$(this).addClass("aqua-text");
    		$('#anio2013').removeClass("aqua-text");
    		$('#anio2014').removeClass("aqua-text");
    		$('#anio2015').removeClass("aqua-text");

			if($('#opciones').val() == 3) {
				crearFilasIndicador3();
				pintarMapa3();
			} else 
			if($('#opciones').val() == 4) {
				crearFilasIndicador4();
				pintarMapa4();
			} else 
			if($('#opciones').val() == 5) {
				crearFilasIndicador5();
				pintarMapa5();
			} else 
			if($('#opciones').val() == 6) {
				crearFilasIndicador6();
				pintarMapa6();
			} else 
			if($('#opciones').val() == 7) {
				crearFilasIndicador7();
				pintarMapa7();
			}		
	} else if($(this).text() == 2013) {
		anio = 2013;

    		$('#anio2010').removeClass("aqua-text");
    		$('#anio2011').removeClass("aqua-text");
    		$('#anio2012').removeClass("aqua-text");
    		$(this).addClass("aqua-text");
    		$('#anio2014').removeClass("aqua-text");
    		$('#anio2015').removeClass("aqua-text");


			if($('#opciones').val() == 2) {
				crearFilasIndicador2();
				pintarMapa2();
			} else 
			if($('#opciones').val() == 3) {
				crearFilasIndicador3();
				pintarMapa3();
			}
	} else if($(this).text() == 2014) {
		anio = 2014;

    		$('#anio2010').removeClass("aqua-text");
    		$('#anio2011').removeClass("aqua-text");
    		$('#anio2012').removeClass("aqua-text");
    		$('#anio2013').removeClass("aqua-text");
    		$(this).addClass("aqua-text");
    		$('#anio2015').removeClass("aqua-text");

    		if($('#opciones').val() == 1) {
    			crearFilasIndicador1();
    			pintarMapa();
    		} else 
    		if($('#opciones').val() == 2) {
    			crearFilasIndicador2();
    			pintarMapa2();
    		} else 
    		if($('#opciones').val() == 3) {
    			crearFilasIndicador3();
    			pintarMapa3();
    		}
	} else if($(this).text() == 2015) {
		anio = 2015;

    		$('#anio2010').removeClass("aqua-text");
    		$('#anio2011').removeClass("aqua-text");
    		$('#anio2012').removeClass("aqua-text");
    		$('#anio2013').removeClass("aqua-text");
    		$('#anio2014').removeClass("aqua-text");
    		$(this).addClass("aqua-text");

			if($('#opciones').val() == 3) {
				crearFilasIndicador3();
				pintarMapa3();
			}
	}
});

function crearAnios1() {
	$("#anios-container").empty();
	topEs.features[0].properties.ganado.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios2() {
	$("#anios-container").empty();
	topEs.features[0].properties.cosechada.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios3() {
	$("#anios-container").empty();
	topEs.features[0].properties.incendios.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios4() {
	$("#anios-container").empty();
	topEs.features[0].properties.estimacionresiduos.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios5() {
	$("#anios-container").empty();
	topEs.features[0].properties.genelec.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios6() {
	$("#anios-container").empty();
	topEs.features[0].properties.vehiregistrados.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios7() {
	$("#anios-container").empty();
	topEs.features[0].properties.plantasresiduales.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios8() {
	$("#anios-container").empty();
	topEs.features[0].properties.buques.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearAnios9() {
	$("#anios-container").empty();
	topEs.features[0].properties.vuelos.forEach(function(el) {
		if(el.tiempo >= 2010) {
			$("#anios-container").append('<div style="width: 100%;" id="anio' + el.tiempo + '"><p class="text-center map-year"><strong>' + el.tiempo + '</strong></p></div>');
		}
	});
}

function crearFilasIndicador1() {

	topEs.features.forEach(function(el) {
		el.properties.ganado.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.ganado[ind].valor - a.properties.ganado[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.ganado[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.ganado[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.ganado[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.ganado[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.ganado[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}

function crearFilasIndicador2() {

	topEs.features.forEach(function(el) {
		el.properties.cosechada.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return parseInt( b.properties.cosechada[ind].valor.replace(/\,/g,''), 10 ) - parseInt( a.properties.cosechada[ind].valor.replace(/\,/g,''), 10 );
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.cosechada[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.cosechada[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.cosechada[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.cosechada[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.cosechada[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}

function crearFilasIndicador3() {

	topEs.features.forEach(function(el) {
		el.properties.incendios.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.incendios[ind].valor - a.properties.incendios[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.incendios[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.incendios[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.incendios[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.incendios[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.incendios[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>' 
	+ '</table>';

}


function crearFilasIndicador4() {

	topEs.features.forEach(function(el) {
		el.properties.estimacionresiduos.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.estimacionresiduos[ind].valor - a.properties.estimacionresiduos[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.estimacionresiduos[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.estimacionresiduos[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.estimacionresiduos[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.estimacionresiduos[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.estimacionresiduos[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}


function crearFilasIndicador5() {

	topEs.features.forEach(function(el) {
		el.properties.genelec.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.genelec[ind].valor - a.properties.genelec[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.genelec[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.genelec[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.genelec[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.genelec[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.genelec[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}


function crearFilasIndicador6() {

	topEs.features.forEach(function(el) {
		el.properties.vehiregistrados.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.vehiregistrados[ind].valor - a.properties.vehiregistrados[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.vehiregistrados[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.vehiregistrados[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.vehiregistrados[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.vehiregistrados[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.vehiregistrados[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}


function crearFilasIndicador7() {

	topEs.features.forEach(function(el) {
		el.properties.plantasresiduales.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.plantasresiduales[ind].valor - a.properties.plantasresiduales[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.plantasresiduales[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.plantasresiduales[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.plantasresiduales[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.plantasresiduales[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.plantasresiduales[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}

function crearFilasIndicador8() {

	topEs.features.forEach(function(el) {
		el.properties.buques.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.buques[ind].valor - a.properties.buques[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.buques[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.buques[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.buques[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.buques[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.buques[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}


function crearFilasIndicador9() {

	topEs.features.forEach(function(el) {
		el.properties.vuelos.forEach(function(ele, index) {
					// console.log(ele.tiempo);
					if ( ele.tiempo == anio ) {
						ind = index;
						// console.log(ind);
					}
				});
	});

	topEs.features.sort(function(a,b) {
		return b.properties.vuelos[ind].valor - a.properties.vuelos[ind].valor;
	});

	filas = '<table class="table table-striped table-condensed table-top"><tr><td><b>Estado</b></td><td><b>Valor</b></td><td><b>PIB</b></td></tr>'
	+ '<tr><td>' + topEs.features[0].properties.name + '</td><td>' + topEs.features[0].properties.vuelos[ind].valor + '</td><td>'+topEs.features[0].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[1].properties.name + '</td><td>' + topEs.features[1].properties.vuelos[ind].valor + '</td><td>'+topEs.features[1].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[2].properties.name + '</td><td>' + topEs.features[2].properties.vuelos[ind].valor + '</td><td>'+topEs.features[2].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[3].properties.name + '</td><td>' + topEs.features[3].properties.vuelos[ind].valor + '</td><td>'+topEs.features[3].properties.valoragregado_2014+'</td></tr>' 
	+ '<tr><td>' + topEs.features[4].properties.name + '</td><td>' + topEs.features[4].properties.vuelos[ind].valor + '</td><td>'+topEs.features[4].properties.valoragregado_2014+'</td></tr>'
	+ '</table>';

}



function pintarMapa() {

	function getColor1(d) {
		return d > 4000000	? 	'#00664e' :
		d > 3600000	? 	'#009975' :
		d > 3000000	? 	'#00cc9c' :
		d > 2400000	? 	'#00ffc3' :
		d > 1800000	? 	'#33ffcf' :
		d > 1200000	? 	'#66ffdb' :
		d > 600000 	? 	'#99ffe7' :
		'#b3ffed' ;
	}

	function style1(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor1(feature.properties.ganado[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.ganado.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style1,
		onEachFeature: onEachFeature
	}).addTo(map);


	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 600000, 1200000, 1800000, 2400000, 3000000, 3600000, 4000000],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor1(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);

}


function pintarMapa2() {

	function getColor2(d) {
		return 	d > 350000	? 	'#804000' :
				d > 300000	? 	'#b35900' :
				d > 250000	? 	'#e67300' :
				d > 200000	? 	'#ff8c1a' :
				d > 150000	? 	'#ffa64d' :
				d > 100000	? 	'#ffbf80' :
				d > 50000	? 	'#ffcc99' :
								'#ffe6cc' ;
	}

	function style2(feature) {
		var n = feature.properties.cosechada[ind].valor.replace(/\,/g,'');
		n = parseInt(n,10);
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor2(n)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.cosechada.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor.replace(/\,/g,''));
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style2,
		onEachFeature: onEachFeature
	}).addTo(map);


	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 50000, 100000, 150000, 200000, 250000, 300000, 350000],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor2(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);

}

function pintarMapa3() {

	function getColor3(d) {
		return d > 7000 	? 	'#1e3448' :
		d > 6000 	? 	'#2e4d6b' :
		d > 5000 	? 	'#3d678f' :
		d > 4000 	? 	'#4c81b3' :
		d > 3000 	? 	'#709ac2' :
		d > 2000 	? 	'#94b3d1' :
		d > 1000 	? 	'#b7cde1' :
		'#cbd8e7' ;
	}

	function style3(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor3(feature.properties.incendios[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.incendios.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style3,
		onEachFeature: onEachFeature
	}).addTo(map);

	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 1000, 2000, 3000, 4000, 5000, 6000, 7000],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor3(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
}



function pintarMapa4() {

	function getColor4(d) {
		return	d > 3500 	? 	'#660066' :
				d > 3000 	? 	'#990099' :
				d > 2500 	? 	'#cc00cc' :
				d > 2000 	? 	'#ff00ff' :
				d > 1500 	? 	'#ff33ff' :
				d > 1000 	? 	'#ff66ff' :
				d > 500 	? 	'#ff99ff' :
								'#ffccff' ;
	}

	function style4(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor4(feature.properties.estimacionresiduos[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.estimacionresiduos.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style4,
		onEachFeature: onEachFeature
	}).addTo(map);

	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 500, 1000, 1500, 2000, 2500, 3000, 3500],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor4(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
}


function pintarMapa5() {

	function getColor5(d) {
		return	d > 21000000	? 	'#220066' :
				d > 18000000 	? 	'#330099' :
				d > 15000000 	? 	'#4400cc' :
				d > 12000000 	? 	'#5500ff' :
				d > 9000000 	? 	'#7733ff' :
				d > 6000000 	? 	'#9966ff' :
				d > 3000000 	? 	'#bb99ff' :
									'#ddccff' ;
	}

	function style5(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor5(feature.properties.genelec[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.genelec.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style5,
		onEachFeature: onEachFeature
	}).addTo(map);

	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 3000000, 6000000, 9000000, 12000000, 15000000, 18000000, 21000000],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor5(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
}


function pintarMapa6() {

	function getColor6(d) {
		return	d > 3500000 	? 	'#663300' :
				d > 3000000 	? 	'#994c00' :
				d > 2500000 	? 	'#cc6600' :
				d > 2000000 	? 	'#ff8000' :
				d > 1500000 	? 	'#ff9933' :
				d > 1000000 	? 	'#ffb366' :
				d > 500000 	? 	'#ffcc99' :
								'#ffe6cc' ;
	}

	function style6(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor6(feature.properties.vehiregistrados[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.vehiregistrados.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style6,
		onEachFeature: onEachFeature
	}).addTo(map);

	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 500000, 1000000, 1500000, 2000000, 2500000, 3000000, 3500000],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor6(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
}


function pintarMapa7() {

	function getColor7(d) {
		return	d > 140 	? 	'#006633' :
				d > 120 	? 	'#00994d' :
				d > 100 	? 	'#00cc66' :
				d > 80 		? 	'#00ff80' :
				d > 60 		? 	'#33ff99' :
				d > 40 		? 	'#66ffb3' :
				d > 20 		? 	'#99ffcc' :
								'#ccffe6' ;
	}

	function style7(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor7(feature.properties.plantasresiduales[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.plantasresiduales.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style7,
		onEachFeature: onEachFeature
	}).addTo(map);

	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 20, 40, 60, 80, 100, 120, 140],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor7(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
}


function pintarMapa8() {

	function getColor8(d) {
		return	d > 70 		? 	'#3d3d29' :
				d > 60 		? 	'#5c5c3d' :
				d > 50 		? 	'#7a7a52' :
				d > 40 		? 	'#999966' :
				d > 30 		? 	'#adad85' :
				d > 20 		? 	'#c2c2a3' :
				d > 10 		? 	'#d6d6c2' :
								'#ebebe0' ;
	}

	function style8(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor8(feature.properties.buques[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.buques.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style8,
		onEachFeature: onEachFeature
	}).addTo(map);

	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 10, 20, 30, 40, 50, 60, 70],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor8(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
}


function pintarMapa9() {

	function getColor9(d) {
		return	d > 21000 	? 	'#1a334c' :
				d > 18000 	? 	'#264c73' :
				d > 15000 	? 	'#336699' :
				d > 12000 	? 	'#407fbf' :
				d > 9000 	? 	'#6699cc' :
				d > 6000 	? 	'#8cb2d9' :
				d > 3000 	? 	'#b3cce5' :
								'#d9e6f2' ;
	}

	function style9(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'white',
			dashArray: '3',
			fillOpacity: 0.7,
			fillColor: getColor9(feature.properties.vuelos[ind].valor)
		};
	}

	info.removeFrom(map);

	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	}

	info.update = function (props) {
		this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
			+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
			+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
			+ 'Territorio: ' + props.superficie_total + '</div><br>'
			+ '<b>Top estados generadores</b><br>'
			+ filas
			+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.vuelos.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
	};

	info.addTo(map);

	map.removeLayer(geojson);

	geojson = L.geoJson(estados, {
		style: style9,
		onEachFeature: onEachFeature
	}).addTo(map);

	legend.removeFrom(map);

	legend.onAdd = function (map) {

		var div = L.DomUtil.create('div', 'info legend'),
		grades = [0, 3000, 6000, 9000, 12000, 15000, 18000, 21000],
		labels = [],
		from, to;

		for (var i = 0; i < grades.length; i++) {
			from = grades[i];
			to = grades[i + 1];

			labels.push(
				'<i style="background:' + getColor9(from + 1) + '"></i> ' +
				from + (to ? '&ndash;' + to : '+'));
		}

		div.innerHTML = labels.join('<br>');
		return div;
	};

	legend.addTo(map);
}



$.ajax({
	url: "data/screen2.json",
	async: false,
	success: function(data){
		console.log(data);
		estados = data;
		topEs = data;
		estados2 = data;
		topEs2 = data;

		var i = 1;
		$.each(data.features[0].properties, function(key, value) {
		    // console.log(key + " : " + value);
		    if(Array.isArray(value)) {
		    	// console.log(key + " : " + value);
		    	// console.log(value[0].nombre);
		    	$("#opciones").append(new Option(value[0].nombre, i));
		    	i++;
		    }
		}); 

		
	},
	error: function(err) {
		console.log(err.responseText);
		estados = err.responseText;
		topEs = err.responseText;
		estados2 = err.responseText;
		topEs2 = err.responseText;
	}
});

var map = L.map('map', {zoomControl: true}).setView([25.511791, -101.080072], 5);


		// Disable drag and zoom handlers.
		// map.dragging.disable();
		map.touchZoom.disable();
		map.doubleClickZoom.disable();
		map.scrollWheelZoom.disable();

		// Disable tap handler, if present.
		if (map.tap) map.tap.disable();

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6IjZjNmRjNzk3ZmE2MTcwOTEwMGY0MzU3YjUzOWFmNWZhIn0.Y8bhBaUMqFiPrDRW9hieoQ', {
			maxZoom: 7,
			minZoom: 4,
			id: 'mapbox.light'
		}).addTo(map);

		var info = L.control();

		info.onAdd = function (map) {
			this._div = L.DomUtil.create('div', 'info');
			this.update();
			return this._div;
		};

		info.update = function (props) {
			crearFilasIndicador1();
			this._div.innerHTML = (props ? '<h4>' + props.name + '</h4> <br>' 
				+ '<div style="text-align: left;">Población: ' + props.pob_2014 + '<br>' 
				+ 'PIB Anual: ' + props.valoragregado_2014 + '<br>'
				+ 'Territorio: ' + props.superficie_total + '</div><br>'
				+ '<b>Top estados generadores</b><br>'
				+ filas
				+ '<div id="chart2"></div>' : '');

			if (typeof props != "undefined") {
				var x = ['x'];
				var lb = ['Valor'];

				props.ganado.forEach(function(el) {
					x.push(el.tiempo + "-01-01");
					lb.push(el.valor);
				});
			
			
				var chart = c3.generate({
					bindto: '#chart2',
					size: {
						width: 210,
						height: 200
					},
					padding: {
						right: 10
					},
				    data: {
				        x: 'x',
				        columns: [x, lb]
				    },
				    axis: {
				        x: {
				            type: 'timeseries',
				            tick: {
				                format: '%Y'
				            }
				        }
				    }
				});
			}
		};

		info.addTo(map);

		function getColor(d) {
			return 		d > 4000000	? 	'#00664e' :
			d > 3600000	? 	'#009975' :
			d > 3000000	? 	'#00cc9c' :
			d > 2400000	? 	'#00ffc3' :
			d > 1800000	? 	'#33ffcf' :
			d > 1200000	? 	'#66ffdb' :
			d > 600000 	? 	'#99ffe7' :
			'#b3ffed' ;
		}

		function style(feature) {
			return {
				weight: 2,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 0.7,
				fillColor: getColor(feature.properties.ganado[0].valor)
			};
		}

		function highlightFeature(e) {
			var layer = e.target;

			layer.setStyle({
				weight: 5,
				color: '#666',
				dashArray: '',
				fillOpacity: 0.7
			});

			if (!L.Browser.ie && !L.Browser.opera) {
				layer.bringToFront();
			}

			info.update(layer.feature.properties);
		}

		var geojson;

		function resetHighlight(e) {
			geojson.resetStyle(e.target);
			info.update();
		}

		function zoomToFeature(e) {
			map.fitBounds(e.target.getBounds());
		}

		function onEachFeature(feature, layer) {
			layer.on({
				mouseover: highlightFeature,
				mouseout: resetHighlight
			});
		}

		geojson = L.geoJson(estados, {
			style: style,
			onEachFeature: onEachFeature
		}).addTo(map);



		var legend = L.control({position: 'bottomleft'});

		legend.onAdd = function (map) {

			var div = L.DomUtil.create('div', 'info legend'),
			grades = [0, 600000, 1200000, 1800000, 2400000, 3000000, 3600000, 4000000],
			labels = [],
			from, to;

			for (var i = 0; i < grades.length; i++) {
				from = grades[i];
				to = grades[i + 1];

				labels.push(
					'<i style="background:' + getColor(from + 1) + '"></i> ' +
					from + (to ? '&ndash;' + to : '+'));
			}

			div.innerHTML = labels.join('<br>');
			return div;
		};

		legend.addTo(map);





	</script>  
</body>	
</html>
